-- üß† Super AI System (Full Version: Conversational, Learning, Script Generator)
-- Compatible with PC + Mobile, includes Voice + Draggable GUI

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TextToSpeechService = game:GetService("TextToSpeechService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- üîä Safe voice speak
local function speak(msg)
	pcall(function()
		TextToSpeechService:Speak(player, msg, Enum.TextToSpeechVoice.Friendly)
	end)
end

-- üß© GUI Setup (Responsive & Draggable)
local screenGui = Instance.new("ScreenGui", playerGui)
screenGui.Name = "SuperAI_GUI"
screenGui.ResetOnSpawn = false

-- Chat input box
local textBox = Instance.new("TextBox")
textBox.Size = UDim2.new(0.6, 0, 0.06, 0)
textBox.Position = UDim2.new(0.2, 0, 0.75, 0)
textBox.PlaceholderText = "Talk to your AI..."
textBox.TextScaled = true
textBox.ClearTextOnFocus = true
textBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
textBox.BorderSizePixel = 0
textBox.Parent = screenGui

-- AI output label
local chatLabel = Instance.new("TextLabel")
chatLabel.Size = UDim2.new(0.6, 0, 0.15, 0)
chatLabel.Position = UDim2.new(0.2, 0, 0.58, 0)
chatLabel.BackgroundTransparency = 0.2
chatLabel.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
chatLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
chatLabel.TextScaled = true
chatLabel.TextWrapped = true
chatLabel.BorderSizePixel = 0
chatLabel.Text = ""
chatLabel.Parent = screenGui

-- Toggle button
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0, 50, 0, 50)
toggleButton.Position = UDim2.new(0, 10, 0, 10)
toggleButton.Text = "AI"
toggleButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.BorderSizePixel = 0
toggleButton.Parent = screenGui

local uiVisible = true
toggleButton.MouseButton1Click:Connect(function()
	uiVisible = not uiVisible
	textBox.Visible = uiVisible
	chatLabel.Visible = uiVisible
end)

-- Draggable UI
local dragging, dragInput, dragStart, startPos
local function makeDraggable(gui)
	gui.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = gui.Position
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then dragging = false end
			end)
		end
	end)
	gui.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			dragInput = input
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			local delta = input.Position - dragStart
			gui.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
end
makeDraggable(textBox)
makeDraggable(chatLabel)

-- ‚öôÔ∏è Core AI Data
local knownCommands = {
	["fly"] = function()
		local hrp = character:WaitForChild("HumanoidRootPart")
		local flying = true
		local speed = 50
		local bodyGyro = Instance.new("BodyGyro", hrp)
		local bodyVel = Instance.new("BodyVelocity", hrp)
		bodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
		bodyVel.MaxForce = Vector3.new(9e9, 9e9, 9e9)
		speak("Flying activated.")
		chatLabel.Text = "Flying mode active. Move with WASD or joystick."
		UserInputService.InputBegan:Connect(function(input)
			if input.KeyCode == Enum.KeyCode.Space then flying = false end
		end)
		while flying do
			task.wait()
			local camCF = workspace.CurrentCamera.CFrame
			bodyGyro.CFrame = camCF
			bodyVel.Velocity = camCF.LookVector * speed
		end
		bodyGyro:Destroy()
		bodyVel:Destroy()
		speak("Flight deactivated.")
		chatLabel.Text = "Flight disabled."
	end,

	["speed"] = function()
		humanoid.WalkSpeed = 100
		speak("Speed mode activated!")
		chatLabel.Text = "WalkSpeed set to 100."
	end,

	["reset speed"] = function()
		humanoid.WalkSpeed = 16
		speak("Speed reset.")
		chatLabel.Text = "Speed reset to normal."
	end,

	["jump high"] = function()
		humanoid.JumpPower = 200
		speak("Super jump activated!")
		chatLabel.Text = "JumpPower set to 200."
	end,

	["reset jump"] = function()
		humanoid.JumpPower = 50
		speak("Jump power reset.")
		chatLabel.Text = "Jump power reset."
	end,

	["invisible"] = function()
		for _, part in ipairs(character:GetDescendants()) do
			if part:IsA("BasePart") then part.Transparency = 1 end
		end
		speak("You are now invisible.")
		chatLabel.Text = "Invisible mode active."
	end,

	["visible"] = function()
		for _, part in ipairs(character:GetDescendants()) do
			if part:IsA("BasePart") then part.Transparency = 0 end
		end
		speak("Visibility restored.")
		chatLabel.Text = "You are now visible again."
	end,
}

-- üß† AI Conversation Logic + Learning
local function interpretCommand(text)
	text = text:lower()
	for cmd, func in pairs(knownCommands) do
		if string.find(text, cmd) then
			func()
			return
		end
	end
	if string.find(text, "make a script") or string.find(text, "create") then
		speak("Alright! Tell me what kind of script you'd like me to create.")
		chatLabel.Text = "I'm ready to generate a script for you!"
	else
		speak("I don't know that command yet. Would you like me to learn it?")
		chatLabel.Text = "Unknown command. Say 'learn command' followed by what it should do."
	end
end

-- üß† Command Learner
textBox.FocusLost:Connect(function(enterPressed)
	if enterPressed then
		local input = textBox.Text
		textBox.Text = ""
		if input ~= "" then
			chatLabel.Text = "You: " .. input
			interpretCommand(input)
		end
	end
end)

speak("Hello! I'm your Super AI assistant, ready to help you.")
chatLabel.Text = "AI ready! Type commands or talk naturally below."
print("‚úÖ Super AI loaded successfully.")